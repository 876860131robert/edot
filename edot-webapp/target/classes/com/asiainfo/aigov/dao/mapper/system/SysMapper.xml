<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.asiainfo.aigov.dao.system.SysMapper">
 <resultMap id="SysRoleResultMap" type="com.asiainfo.aigov.model.system.SysRole">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 21 14:29:45 GMT+08:00 2016.
    -->
    <id column="ROLE_ID" jdbcType="DECIMAL" property="roleId" />
    <result column="ROLE_CODE" jdbcType="VARCHAR" property="roleCode" />
    <result column="ROLE_NAME" jdbcType="VARCHAR" property="roleName" />
    <result column="ROLE_DESC" jdbcType="VARCHAR" property="roleDesc" />
    <result column="ROLE_STATE" jdbcType="DECIMAL" property="roleState" />
    <result column="CREATE_OPERATOR_ID" jdbcType="DECIMAL" property="createOperatorId" />
    <result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
    <result column="UPDATE_OPERATOR_ID" jdbcType="DECIMAL" property="updateOperatorId" />
    <result column="UPDATE_TIME" jdbcType="DATE" property="updateTime" />
    <result column="STATION_GROUP_ID" jdbcType="DECIMAL" property="stationGroupId" />
    <result column="DOMAIN_ID" jdbcType="VARCHAR" property="domainId" />
  </resultMap>
  
  <resultMap id="SysMenuResultMap" type="com.asiainfo.aigov.model.system.SysMenu">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jun 05 13:59:53 GMT+08:00 2016.
    -->
    <id column="MENU_ID" jdbcType="DECIMAL" property="menuId" />
    <result column="PARENT_MENU_ID" jdbcType="DECIMAL" property="parentMenuId" />
    <result column="MENU_CODE" jdbcType="VARCHAR" property="menuCode" />
    <result column="MENU_NAME" jdbcType="VARCHAR" property="menuName" />
    <result column="MENU_DESC" jdbcType="VARCHAR" property="menuDesc" />
    <result column="MENU_URL" jdbcType="VARCHAR" property="menuUrl" />
    <result column="MENU_ICO" jdbcType="VARCHAR" property="menuIco" />
    <result column="MENU_ORDER" jdbcType="DECIMAL" property="menuOrder" />
    <result column="MENU_TYPE" jdbcType="DECIMAL" property="menuType" />
    <result column="MENU_STATE" jdbcType="DECIMAL" property="menuState" />
    <result column="CREATE_OPERATOR_ID" jdbcType="DECIMAL" property="createOperatorId" />
    <result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
    <result column="UPDATE_OPERATOR_ID" jdbcType="DECIMAL" property="updateOperatorId" />
    <result column="UPDATE_TIME" jdbcType="DATE" property="updateTime" />
    <result column="DOMAIN_ID" jdbcType="DECIMAL" property="domainId" />
  </resultMap>
  
   <resultMap id="SysOperatorResultMap" type="com.asiainfo.aigov.model.system.SysOperator">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jun 22 22:52:56 GMT+08:00 2016.
    -->
    <id column="OPERATOR_ID" jdbcType="DECIMAL" property="operatorId" />
    <result column="OPERATOR_CODE" jdbcType="VARCHAR" property="operatorCode" />
    <result column="OPERATOR_NAME" jdbcType="VARCHAR" property="operatorName" />
    <result column="OPERATOR_PWD" jdbcType="VARCHAR" property="operatorPwd" />
    <result column="ORG_ID" jdbcType="VARCHAR" property="orgId" />
    <result column="SEX" jdbcType="DECIMAL" property="sex" />
    <result column="BIRTHDAY" jdbcType="DATE" property="birthday" />
    <result column="EMAIL" jdbcType="VARCHAR" property="email" />
    <result column="PHONE" jdbcType="VARCHAR" property="phone" />
    <result column="ADDR" jdbcType="VARCHAR" property="addr" />
    <result column="OPERATOR_TYPE" jdbcType="VARCHAR" property="operatorType" />
    <result column="OPERATOR_LEVEL" jdbcType="VARCHAR" property="operatorLevel" />
    <result column="CART_TYPE" jdbcType="VARCHAR" property="cartType" />
    <result column="CERT_ID" jdbcType="VARCHAR" property="certId" />
    <result column="OPERATOR_STATE" jdbcType="DECIMAL" property="operatorState" />
    <result column="CREATE_OPERATOR_ID" jdbcType="DECIMAL" property="createOperatorId" />
    <result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
    <result column="UPDATE_OPERATOR_ID" jdbcType="DECIMAL" property="updateOperatorId" />
    <result column="UPDATE_TIME" jdbcType="DATE" property="updateTime" />
    <result column="OPERATOR_DESC" jdbcType="VARCHAR" property="operatorDesc" />
    <result column="DOMAIN_ID" jdbcType="DECIMAL" property="domainId" />
  </resultMap>
  
  <sql id="Sys_Role_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 21 14:29:45 GMT+08:00 2016.
    -->
    ROLE_ID, ROLE_CODE, ROLE_NAME, ROLE_DESC, ROLE_STATE, CREATE_OPERATOR_ID, CREATE_TIME, 
    UPDATE_OPERATOR_ID, UPDATE_TIME, STATION_GROUP_ID, DOMAIN_ID
  </sql>
  
  <sql id="Sys_Menu_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jun 05 13:59:53 GMT+08:00 2016.
    -->
    MENU_ID, PARENT_MENU_ID, MENU_CODE, MENU_NAME, MENU_DESC, MENU_URL, MENU_ICO, MENU_ORDER, 
    MENU_TYPE, MENU_STATE, CREATE_OPERATOR_ID, CREATE_TIME, UPDATE_OPERATOR_ID, UPDATE_TIME, 
    DOMAIN_ID
  </sql>
  
  <sql id="Sys_Operator_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jun 22 22:52:56 GMT+08:00 2016.
    -->
    OPERATOR_ID, OPERATOR_CODE, OPERATOR_NAME, OPERATOR_PWD, ORG_ID, SEX, BIRTHDAY, EMAIL, 
    PHONE, ADDR, OPERATOR_TYPE, OPERATOR_LEVEL, CART_TYPE, CERT_ID, OPERATOR_STATE, CREATE_OPERATOR_ID, 
    CREATE_TIME, UPDATE_OPERATOR_ID, UPDATE_TIME, OPERATOR_DESC, DOMAIN_ID
  </sql>

  <sql id="Sys_Operator_Where_Clause">
    where 1=1
      <if test="operatorId != null">
        and OPERATOR_ID = #{operatorId,jdbcType=DECIMAL}
      </if>
      <if test="operatorCode != null">
        and (OPERATOR_CODE like '%'||#{operatorCode,jdbcType=VARCHAR}||'%' or OPERATOR_NAME like '%'||#{operatorName,jdbcType=VARCHAR}||'%')
      </if>
      <if test="orgId != null">
        and ORG_ID = #{orgId,jdbcType=VARCHAR}
      </if>
  </sql>
  
  <sql id="Sys_Operator_Where_Clause_2">
    where 1=1
      <if test="operatorCode != null">
        and OPERATOR_CODE = #{operatorCode,jdbcType=VARCHAR}
      </if>
  </sql>
  
   <sql id="Sys_Menu_Where_Clause">
    where 1=1
      <if test="parentMenuId != null">
        and PARENT_MENU_ID = #{parentMenuId,jdbcType=DECIMAL}
      </if>
  </sql>
  
   <sql id="Sys_Org_Where_Clause">
    where 1=1
      <if test="parentOrgId != null">
        and PARENT_ORG_ID = #{parentOrgId,jdbcType=DECIMAL}
      </if>
  </sql>
  
  <select id="selectSysRole" parameterType="java.util.Map" resultMap="SysRoleResultMap">
    select
    <include refid="Sys_Role_Column_List" />
      from sys_role t
     where exists (select 1
                    from sys_operator_2_role t2
                   where t2.role_id = t.role_id
                     and operator_id = #{operatorId,jdbcType=DECIMAL})
  </select>
  
  <select id="selectSysMenu" parameterType="java.util.Map" resultMap="SysMenuResultMap">
    select
    <include refid="Sys_Menu_Column_List" />
      from sys_menu t
     where exists (select 1
            from sys_role_2_menu t1
           where t1.menu_id = t.menu_id
             and exists (select 1
                    from sys_operator_2_role t2
                   where t2.role_id = t1.role_id
                     and operator_id = #{operatorId,jdbcType=DECIMAL}))
      order by menu_order
  </select>
  
  <select id="selectSysMenuByRole" parameterType="java.util.Map" resultMap="SysMenuResultMap">
    select
    <include refid="Sys_Menu_Column_List" />
      from sys_menu t
     where exists (select 1
            from sys_role_2_menu t1
           where t1.menu_id = t.menu_id
             and role_id = #{roleId,jdbcType=DECIMAL})
      order by menu_order
  </select>
  
  <select id="countSysOperator" parameterType="java.util.Map" resultType="java.lang.Integer">
    select count(*) from SYS_OPERATOR
    <if test="_parameter != null">
      <include refid="Sys_Operator_Where_Clause" />
    </if>
  </select>
  
  <select id="selectSysOperatorWithRowbounds" parameterType="java.util.Map" resultMap="SysOperatorResultMap">
    select
    <include refid="Sys_Operator_Column_List" />
    from SYS_OPERATOR
    <if test="_parameter != null">
      <include refid="Sys_Operator_Where_Clause" />
    </if>
  </select>
  
  <select id="countByParentMenuId" parameterType="java.util.Map" resultType="java.lang.Integer">
    select count(*) from SYS_MENU
    <if test="_parameter != null">
      <include refid="Sys_Menu_Where_Clause" />
    </if>
  </select>
  
  <select id="countByParentOrgId" parameterType="java.util.Map" resultType="java.lang.Integer">
    select count(*) from SYS_ORG
    <if test="_parameter != null">
      <include refid="Sys_Org_Where_Clause" />
    </if>
  </select>
  
  <select id="countSysOperatorByOperCode" parameterType="java.util.Map" resultType="java.lang.Integer">
    select count(*) from SYS_OPERATOR
    <if test="_parameter != null">
      <include refid="Sys_Operator_Where_Clause_2" />
    </if>
  </select>
</mapper>